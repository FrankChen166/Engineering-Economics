<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Review Test</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      .correct {
        color: green;
      }
      .incorrect {
        color: red;
      }
      .default {
        color: black;
      }
    </style>
  </head>
  <body>
    <div>
      <div class="d-flex justify-content-center mb-3 mt-3">
        <h2>Review Test <%= testIndex + 1 %></h2>
      </div>

      <% requestedTest.answers.forEach((answer, index) => { %>
      <div style="margin-left: 100px; margin-right: 100px">
        <p>題目 <%= index + 1 %>: <%= answer.question.question %></p>
        <% if (answer.question.imagePath) { %>
        <div>
          <img
            src="<%= answer.question.imagePath %>"
            alt="Question Image"
            style="height: 200px"
          />
        </div>
        <% } %> <% if (answer.question.options && answer.question.options.length
        > 0) { %>
        <ul>
          <% answer.question.options.forEach((option, optIndex) => { %> <% let
          optionClass = 'default'; if (option === answer.correctAnswer) {
          optionClass = 'correct'; } if (option === answer.userAnswer && option
          !== answer.correctAnswer) { optionClass = 'incorrect'; } %>
          <li class="<%= optionClass %>">
            <%= String.fromCharCode(65 + optIndex) %>. <%= option %>
          </li>
          <% }); %>
        </ul>
        <% } %>
        <p>你的答案: <%= answer.userAnswer %></p>
        <p>正確答案: <%= answer.correctAnswer %></p>
      </div>
      <hr />
      <% }); %>
      <div class="d-flex justify-content-center">
        <a
          href="/info"
          class="btn btn-primary btn-sm mb-5"
          style="color: black; text-decoration: none"
          >查看個人檔案</a
        >
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</html>
